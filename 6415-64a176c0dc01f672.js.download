try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="009d6d87-28d7-45dd-9be2-08325f7b97bf",e._sentryDebugIdIdentifier="sentry-dbid-009d6d87-28d7-45dd-9be2-08325f7b97bf")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6415],{8614:(e,t,n)=>{n.d(t,{O:()=>r});let r={apple:"https://apps.apple.com/us/app/leonardo-ai-image-generator/id1662773014",android:"https://play.google.com/store/apps/details?id=ai.leonardo.leonardo",discord:"https://discord.com/invite/leonardo-ai",leonardoApp:"https://app.leonardo.ai/",facebook:"https://www.facebook.com/LeonardoAiOfficial",reddit:"https://www.reddit.com/r/leonardoai",twitter:"https://twitter.com/LeonardoAi_",termsOfService:"https://leonardo.ai/terms-of-service/",dmcaPolicy:"https://leonardo.ai/dmca-policy/",privacyPolicy:"https://leonardo.ai/legal-notice/",faq:"https://intercom.help/leonardo-ai/en/",contact:"https://leonardo.ai/contact-us/",registerInterestForm:"https://leonardo.ai/team-plans/#brxe-bcvkid"}},14192:(e,t,n)=>{n.d(t,{AR:()=>l,CM:()=>T,ED:()=>d,Km:()=>i,LT:()=>u,TX:()=>c,W:()=>p,_N:()=>r,gB:()=>o,u5:()=>a,vh:()=>s});let r="Alchemy Refiner under maintenance",a="Alchemy Upscaler - use this to refine and upscale your images. This can improve faces and hands as part of the process.",i="Use this if you find the creative upscale is resulting in lost detail.",l="HD Crisp Upscale",o="Alchemy Crisp Upscale",s="A great balanced upscaler which retains a good amount of detail and crispness to the image.",c="HD Smooth Upscale",u="Alchemy Smooth Upscale",d="An upscaler that works well with a focused subject, but can end up smoothing out fine detail.",p="Unzoom (BETA)",T="Remove background"},19321:(e,t,n)=>{n.d(t,{a:()=>r});let r={AI_GENERATIONS:"/ai-generations",AI_GENERATIONS_IMAGE_GUIDANCE:"/ai-generations/image-guidance",API_ACCESS:"/api-access",BUY:"/buy",BUY_API:"/buy-api",CANVAS:"/canvas",CHANGELOG:"/changelog",COMMUNITY_FEED:"/community-feed",CREDIT_TOPUP:"/credit-topup",FAQ:"/faq",FINETUNED_MODELS:"/finetuned-models",MODELS_AND_TRAINING:"/models-and-training",MODELS_AND_TRAINING_DATASETS:"/models-and-training/datasets",MODELS_AND_TRAINING_DATASET_EDIT:"/models-and-training/datasets/edit",MODELS_AND_TRAINING_JOB_STATUS:"/models-and-training/job-status",HOME:"/",JOB_STATUS:"/training-datasets/job-status",LOGIN:"/auth/login",LOGIN_V2:"/auth/new-login",IMAGE_GENERATION:"/image-generation",IMAGE_GENERATION_LIGHTNING_STREAM:"/image-generation/flow-state",IMAGE_GENERATION_VIDEO:"/image-generation/video",MAINTENANCE:"/maintenance",MODELS:"/models",LIBRARY:"/library",LIBRARY_COLLECTIONS:"/library/collections",PROFILE:"/profile",REALTIME_CANVAS:"/realtime-canvas",REALTIME_GEN:"/realtime-gen",SETTINGS:"/settings",SETTINGS_PROFILE:"/settings/profile",SETTINGS_TEAMS:"/settings/teams",SETTINGS_USER_API:"/settings/user-api",SETTINGS_ACCOUNT_MANAGEMENT:"/settings/account-management",STORYBOARDS:"/storyboards",TEAM_LIBRARY:"/team-library",TEAM_SETTINGS:"/settings/teams",TEAM_FEED:"/team-library/team-feed",TEAM_FEED_COLLECTIONS:"/team-library/collections",TEAM_FEED_YOUR_COLLECTIONS:"/team-library/your-collections",TEAM_FEED_TEAM_COLLECTIONS:"/team-library/team-collections",TEXTURE_GENERATION:"/texture-generation",TRAINING_DATASETS:"/training-datasets",UNIVERSAL_UPSCALER:"/universal-upscaler",TEAM_FINETUNED_MODELS:"/team-finetuned-models",DATASET_EDIT:"/training-datasets/edit"}},22252:(e,t,n)=>{n.d(t,{GY:()=>T,Nz:()=>d,T2:()=>c,eh:()=>s,lP:()=>p,pJ:()=>o,qT:()=>u,r5:()=>g,r9:()=>h,s_:()=>I,td:()=>N,xs:()=>l,y:()=>f,yk:()=>E});var r=n(19321),a=n(8614),i=n(66415);let l=e=>{if(!e||""===e)return!1;if(e===r.a.HOME||e.startsWith(a.O.leonardoApp.replace(/\/$/,"")))return!0;let t=e.replace(/^\//,"");return Object.values(r.a).some(e=>e!==r.a.HOME&&t.startsWith(e.replace(/^\//,"")))},o=(e,t)=>{let n=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e),r=/\/[^\/].*\.\w+$/.test(e.replace("//",""));return n&&r&&(!t||e.endsWith(t))},s=e=>e.replace(/ /g,"");function c(e){return e.split(/([.!?;]\s*)/).map((e,t)=>t%2==0?e.charAt(0).toUpperCase()+e.slice(1):e).join("")}let u=(e,t,n,r,a)=>{let i=Number.isNaN(Number(e.value))?a||n:Number(e.value),l=parseInt(e.value)||a||n;return Math.min(Math.max("integer"===t?l:i,n),r)},d=e=>{let t=e.trim().replace(/[\/\?<>\\:\*\|"]/g,"").replace(RegExp("(?<!\\.)\\.\\.(?!\\.)","g"),".");if(t.length<=255)return t;let n=t.lastIndexOf("."),r=n>0&&n<t.length-1?t.slice(n):"";return(r?t.slice(0,n):t).slice(0,255-r.length)+r},p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"round";return Math[n](e/t)*t},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.toString();if(isNaN(Number(e))||t<=0)return n;if(n.includes(".")){let[e,r]=n.split(".");return r.length>=t?"".concat(e,".").concat(r.slice(0,t)):"".concat(e,".").concat(r.padEnd(t,"0"))}return"".concat(n,".").concat("0".repeat(t))},m=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{decimalPlaces:r=0,suffix:a}=n,i=[{suffix:"",value:1},{suffix:"K",value:1e3},{suffix:"M",value:1e6},{suffix:"B",value:1e9},{suffix:"T",value:1e12}],l=!1;t=a?i.find(e=>e.suffix===a)||i[0]:i.slice().reverse().find(t=>e>=t.value)||i[0];let o=e/t.value;if(r>0){let e=Math.pow(10,r),t=Math.floor(o*e)/e;l=t!==o,o=t}else l=(o=Math.floor(o))!==e/t.value;return{number:o,suffix:t.suffix,wasRounded:l}},E=(e,t,n)=>!t||t<0?!0===n?e+"s":n||"":"".concat(t," ").concat(e).concat(1===t?"":"s"),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.toString().length<=n)return"".concat((0,i.HY)(e));let{number:a,suffix:l,wasRounded:o}=m(e,{decimalPlaces:r}),s=(0,i.HY)(a);return"".concat(t&&o?"".concat(t," "):"").concat(s).concat(l)},g=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(0===e)return"";let n=e>0?"+":"";return t?"(".concat(n).concat((0,i.HY)(e),")"):"".concat(n).concat((0,i.HY)(e))};function A(e){let t=e.find(e=>{let{index:t}=e;return -1!==t});if(t){for(let n of e)-1!==n.index&&n.index<t.index&&(t=n);return t}}function _(e,t,n,r){return"highlight"===n&&"start"===r?{format:"highlight",type:"start",index:e.indexOf("[[",t)}:"highlight"===n&&"end"===r?{format:"highlight",type:"end",index:e.indexOf("]]",t)}:{format:"bold",type:"both",index:e.indexOf("**",t)}}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["highlight","bold"],n=[],r=0,a=0;for(;r<e.length;){let i=_(e,r,"highlight","start"),l=_(e,r,"bold");if(t.includes("highlight")||(i.index=-1),t.includes("bold")||(l.index=-1),-1===i.index&&-1===l.index){n.push({text:e.slice(a),type:"normal"}),a=e.length;break}let o=A([i,l]);if(!o){n.push({text:e.slice(a),type:"normal"}),a=e.length;break}let s=function(e,t){let n=_(e,t,"highlight","start");return A([n,_(e,t,"bold"),_(e,t,"highlight","end")])}(e,o.index+2);if(!s){n.push({text:e.slice(a),type:"normal"}),a=e.length;break}if(o.format===s.format&&["end","both"].includes(s.type)){if(o.index+2===s.index){e=e.slice(0,o.index)+e.slice(s.index+2);continue}o.index>r&&n.push({text:e.slice(a,o.index),type:"normal"}),n.push({text:e.slice(o.index+2,s.index),type:o.format}),r=s.index+2,a=s.index+2;continue}r=o.index+2}return a<e.length&&n.push({text:e.slice(a),type:"normal"}),n}let f=(e,t)=>"".concat(e,"/").concat(t," characters"),N=(e,t,n)=>"one"!==new Intl.PluralRules("en-US").select(e)?n:t},30284:(e,t,n)=>{n.d(t,{O9:()=>I,U5:()=>_,dm:()=>f,i8:()=>A,K7:()=>R,X5:()=>C,WO:()=>g,nn:()=>P,is:()=>N,Mc:()=>m,cR:()=>T,oM:()=>p,Ul:()=>L,kT:()=>h});var r=n(61461),a=n(31481),i=n(31698),l=n(98959);let o=function(e,t){if(t<=0||t>=1)throw Error("Accuracy must be > 0 and < 1.");let n=Math.sign(e);-1===n&&(e=Math.abs(e));let r=0===n?t:e*t,a=Math.floor(e);if((e-=a)<r)return[n*a,1];if(1-r<e)return[n*(a+1),1];let i=0,l=1,o=1,s=1;for(;;){let t=i+o,c=l+s;if(c*(e+r)<t)o=t,s=c;else{if(!(t<(e-r)*c))return[a*c+t*n,c];i=t,l=c}}};var s=n(48831),c=n(958),u=n(52592),d=n(35936);let p=e=>l.dy.some(t=>t.controlnetType===e),T=e=>(null==e?void 0:e.type)===i.w.Img2Img,m=e=>(null==e?void 0:e.type)===i.w.ControlNet,E=(e,t)=>e?t.filter(t=>t.type===i.w.ControlNet&&t.isEnabled&&t.match.controlnetType===e):[],h=(e,t)=>{if(!e)return!1;let n=p(e),r=E(e,t);return n&&r.length>1},g=e=>{var t,n,r,l,o,s,c,u;let{definition:d,imageInputType:p}=e;return p===i.w.Img2Img?{min:a.INIT_IMAGE_STRENGTH_MIN_VALUE,max:a.INIT_IMAGE_STRENGTH_MAX_VALUE,step:a.INIT_IMAGE_STRENGTH_STEP_VALUE,default:a.INIT_IMAGE_STRENGTH_DEFAULT_VALUE}:p===i.w.ImagePrompt?{min:a.IMAGE_PROMPT_STRENGTH_MIN_VALUE,max:a.IMAGE_PROMPT_STRENGTH_MAX_VALUE,step:a.IMAGE_PROMPT_STRENGTH_STEP_VALUE,default:a.IMAGE_PROMPT_STRENGTH_DEFAULT_VALUE}:(null==d?void 0:d.name)==="Content Reference"?{min:null!==(t=d.weightMin)&&void 0!==t?t:a.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(n=d.weightMax)&&void 0!==n?n:a.CONTROLNET_STRENGTH_MAX_VALUE,step:a.CONTROLNET_STRENGTH_STEP_VALUE,default:2}:(null==d?void 0:d.name)==="Style Reference"?{min:null!==(r=d.weightMin)&&void 0!==r?r:a.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(l=d.weightMax)&&void 0!==l?l:a.CONTROLNET_STRENGTH_MAX_VALUE,step:a.CONTROLNET_STRENGTH_STEP_VALUE,default:.8}:(null==d?void 0:d.name)==="Character Reference"?{min:null!==(o=d.weightMin)&&void 0!==o?o:a.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(s=d.weightMax)&&void 0!==s?s:a.CONTROLNET_STRENGTH_MAX_VALUE,step:a.CONTROLNET_STRENGTH_STEP_VALUE,default:1.32}:{min:null!==(c=null==d?void 0:d.weightMin)&&void 0!==c?c:a.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(u=null==d?void 0:d.weightMax)&&void 0!==u?u:a.CONTROLNET_STRENGTH_MAX_VALUE,step:a.CONTROLNET_STRENGTH_STEP_VALUE,default:a.CONTROLNET_STRENGTH_DEFAULT_VALUE}},A=(e,t)=>g({imageInputType:e,definition:t}).default,_=e=>{let{weight:t,...n}=e,r=g(n);return Math.max(r.min,Math.min(t,r.max))},I=e=>{let{width:t,height:n}=e;if(!n)return{numerator:0,denominator:0,error:0};let r=t/n,[a,i]=o(r,.05),l=Math.abs(r-a/i);return{numerator:a,denominator:i,error:l}},f=(e,t)=>{if(!t)return null;let n=t.width/t.height,r=null,a=Number.MAX_VALUE;for(let[t,i]of Array.from(e.entries())){let e=Math.abs(i.long/i.short-n)/n;e<.2&&e<a&&(r=t,a=e)}return r},N=e=>{let{imageInputs:t,imageInput:n,imageInputIdx:o,imageInputLimit:s,usingLeonardoMagic:p,usingAlchemy:T,inputBaseModel:m,currentSdVersion:E,leonardoMagicVersion:h,usingPhotoReal:g,photoRealVersion:A,usingTransparency:_}=e;if(!n)return!1;let I=(0,d.kt)(E),f=T&&p&&!I&&h===r.PROMPT_MAGIC_VERSIONS.v3,N=n.type===i.w.ControlNet&&n.match.controlnetType===u.bd.StyleTransfer,v=n.type===i.w.ControlNet&&n.match.controlnetType===u.bd.FaceTransfer,O=n.type===i.w.ControlNet&&n.match.controlnetType===u.bd.ContentTransfer;if((0,d.CV)(E))return"You cannot use image to image inputs with Stable Diffusion V3";if(void 0!==s&&o>=s)return 1===s?"You can only have ".concat(s," image guidance input enabled. Please remove this image input."):"You can only have ".concat(s," image guidance inputs enabled. Please remove this image input.");if(p&&h===r.PROMPT_MAGIC_VERSIONS.v2)switch(n.type){case i.w.ControlNet:return"You cannot use controlnet inputs with Prompt Magic v2.";case i.w.Img2Img:return"You cannot use image to image inputs with Prompt Magic v2.";case i.w.ImagePrompt:return!0}else if(n.type===i.w.ImagePrompt)return"Image Prompts require Prompt Magic V2";if(n.type===i.w.Img2Img)return t.filter(e=>e.type===i.w.Img2Img&&e.isEnabled).length>1?"You can only have one Image to image input enabled.":!I&&!g&&!f||!t.find(e=>e.type===i.w.ControlNet&&e.match.controlnetType!==u.bd.StyleTransfer&&e.match.controlnetType!==u.bd.FaceTransfer)||"Image to Image cannot be combined with other image guidance for XL models, PhotoReal, and PMv3.";if(n.type===i.w.ControlNet){if(l.jo.some(e=>e.controlnetType===n.match.controlnetType)&&t.filter(e=>e.type===i.w.ControlNet&&e.match.controlnetType===n.match.controlnetType&&e.isEnabled).length>1){var P;let e=null===(P=l.jo.find(e=>e.controlnetType===n.match.controlnetType))||void 0===P?void 0:P.name;return"You cannot have more than one ".concat(e," input")}if((n.match.controlnetType===u.bd.Depth||n.match.controlnetType===u.bd.Canny)&&t.some(e=>e.type===i.w.ControlNet&&e.match.controlnetType===u.bd.ContentTransfer&&e.isEnabled))return"This ControlNet isn't compatible with Content Reference."}if(!m)return"This ControlNet isn't compatible with the selected model.";if(f)return N?"Style Reference is not compatible with Prompt Magic V3":O?"Content Reference is not compatible with Prompt Magic V3":v?"Character Reference is not compatible with Prompt Magic V3":!!(!m||(0,d.kt)(m)||!N)||"Only SDXL ControlNets can be used with Prompt Magic V3";if(g){let e=!m||(0,d.kt)(m);if(A===a.PhotoRealVersion.V1){if(N)return"Style Reference is not compatible with PhotoReal V1";if(v)return"Character Reference is not compatible with PhotoReal V1"}return!!e||"Only SDXL ControlNets can be used with PhotoReal"}return _===c.P2Y.ForegroundOnly&&N?"Style Reference is not compatible with Transparency":I?!!(!m||(0,d.kt)(m))||"This ControlNet isn't compatible with the selected model.":!!(!m||m===E)||"This ControlNet isn't compatible with the selected model."},v=e=>{let{inputBaseModel:t,usingLeonardoMagic:n,leonardoMagicVersion:a,usingAlchemy:i,usingPhotoReal:l,currentSdVersion:o}=e;if(!t)return!1;let s=i&&n&&a===r.PROMPT_MAGIC_VERSIONS.v3;return l||s||(0,d.kt)(o)?(0,d.kt)(t):!t||t===o},O=e=>{let{usingLeonardoMagic:t,leonardoMagicVersion:n}=e;return t&&n===r.PROMPT_MAGIC_VERSIONS.v2?[!0,"Prompt Magic v2 is currently incompatible with controlnets, disable it to use this option."]:[!1]},P=e=>{let{imageInputDefinitions:t,usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:a,leonardoMagicVersion:i,currentSdVersion:l}=e;return(t||[]).filter(e=>e.preprocessors.find(e=>v({usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:a,leonardoMagicVersion:i,currentSdVersion:l,inputBaseModel:e.preprocessorBaseModel}))).map(e=>e.preprocessors.filter(e=>v({usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:a,leonardoMagicVersion:i,currentSdVersion:l,inputBaseModel:e.preprocessorBaseModel})).filter(e=>!(e.preprocessorName||"").includes("Zoe")||(0,d.kt)(e.preprocessorBaseModel)).map(t=>{let[n,r]=O({usingLeonardoMagic:a,leonardoMagicVersion:i});return{...t,...e,isDisabled:n,disabledTooltip:r}})).flat().sort((e,t)=>{let n=["StyleTransfer","ContentTransfer","FaceTransfer"],r=n.includes(e.controlnetType),a=n.includes(t.controlnetType);return r&&a?n.indexOf(e.controlnetType)-n.indexOf(t.controlnetType):r?-1:a?1:e.name.localeCompare(t.name)})},L=e=>{let{preprocessor:t,controlNetMatch:n,usingPhotoReal:a,usingAlchemy:i,usingLeonardoMagic:l,leonardoMagicVersion:o,currentSdVersion:s,matchAnyProcessorModelVersion:c}=e,u=t.preprocessorName===n.preprocessorName,p=t.preprocessorBaseModel===s;if(c)return u;let T=i&&l&&o===r.PROMPT_MAGIC_VERSIONS.v3;return a||T||(0,d.kt)(s)?u&&(0,d.kt)(t.preprocessorBaseModel):u&&p},R=(e,t)=>{if(e&&t.imageInputDefinitions&&e.type===i.w.ControlNet)return t.imageInputDefinitions.find(t=>t.controlnetType===e.match.controlnetType)},C=e=>{var t;let{currentSdVersion:n,leonardoMagicVersion:r,usingAlchemy:a,usingLeonardoMagic:o,usingPhotoReal:c,canChangeToImagePrompt:u,canChangeToImg2Img:d,imageInputDefinitions:p,isImageGuidancePremiumAllowed:T,existingImageInputs:m}=e,A=P({imageInputDefinitions:p,currentSdVersion:n,leonardoMagicVersion:r,usingAlchemy:a,usingLeonardoMagic:o,usingPhotoReal:c});if(!T&&d)return{type:i.w.Img2Img,weighting:g({imageInputType:i.w.Img2Img}).default};if(u)return{type:i.w.ImagePrompt,weighting:g({imageInputType:i.w.ImagePrompt}).default};let _=A.find(e=>!!v({usingPhotoReal:c,usingAlchemy:a,usingLeonardoMagic:o,leonardoMagicVersion:r,currentSdVersion:n,inputBaseModel:e.preprocessorBaseModel})&&e.preprocessors.some(e=>T||!(0,s.Lc)(e)));if(!_){let e=u?i.w.ImagePrompt:i.w.Img2Img;return{type:e,weighting:g({imageInputType:e}).default}}let I=h(_.controlnetType,m),f=I?{influence:l.wU}:{},N=E(_.controlnetType,m),O=I&&N.length>1?N[0].weighting:g({imageInputType:i.w.ControlNet,definition:_}).default;return{type:i.w.ControlNet,match:{preprocessorName:null!==(t=_.preprocessorName)&&void 0!==t?t:void 0,controlnetType:_.controlnetType},weighting:O,...f}}},31698:(e,t,n)=>{n.d(t,{w:()=>r});var r=function(e){return e.ControlNet="CONTROLNET",e.ImagePrompt="IMAGE_PROMPT",e.Img2Img="IMG_2_IMG",e}({})},35936:(e,t,n)=>{n.d(t,{$V:()=>S,Bw:()=>p,CV:()=>m,Co:()=>h,FL:()=>G,H9:()=>u,Kw:()=>H,L7:()=>I,M1:()=>R,ON:()=>b,QB:()=>N,QQ:()=>D,TC:()=>c,Td:()=>w,W0:()=>U,Ye:()=>O,ZJ:()=>T,bZ:()=>M,bh:()=>C,cB:()=>y,dV:()=>A,ef:()=>L,iO:()=>v,iX:()=>k,iY:()=>E,kt:()=>_,l9:()=>P,p4:()=>g,uA:()=>x,vM:()=>F,vT:()=>f});var r=n(31481),a=n(46671),i=n(958),l=n(85756),o=n(52592),s=n(31698);let c=e=>Object.values(r.MODEL_IDS).some(t=>t===e),u=e=>Object.values(o.gP).includes(e),d=e=>e===r.LEONARDO_MOTION_MODEL_ID,p=e=>l.fU.includes(e),T=e=>e===o.gP.v2,m=e=>e===o.gP.v3,E=e=>l.sW.includes(e),h=e=>d(e)?a.sd_generation_style.CREATIVE:E(e)?a.sd_generation_style.LEONARDO:a.sd_generation_style.NONE,g=e=>l.Ze.includes(e),A=e=>g(e),_=e=>e===o.gP.SDXL_0_8||e===o.gP.SDXL_0_9||e===o.gP.SDXL_1_0||e===o.gP.SDXL_LIGHTNING,I=e=>e===o.gP.PHOENIX,f=e=>e===o.gP.FLUX||e===o.gP.FLUX_DEV,N=e=>e===o.gP.FLUX,v=e=>e===o.gP.FLUX_DEV,O=e=>e===o.gP.SDXL_LIGHTNING,P=e=>{let{modelVersion:t,presetVersion:n}=e;return I(t)?I(n):f(t)?f(n):!I(n)&&!f(n)},L=e=>_(e)||m(e)||I(e)||f(e),R=e=>e===l.le.LEONARDO_PHOENIX_V1,C=(e,t,n)=>{if(!t)return!0;let r=n[t];return!r||(I(r.sdVersion)?I(e):f(r.sdVersion)?f(e):!I(e)&&!f(e))},U=(e,t)=>!m(e)||!!t.isSdV3Enabled,y=(e,t)=>!R(e)||!!t.isPhoenixV1Enabled,b=e=>e===r.MODEL_IDS.PHOTOREAL,S=e=>!!Object.values(r.PhotoRealV2Models).find(t=>t.id===e),M=e=>b(e)||S(e),w=(e,t)=>{var n;return(null===(n=Object.values(r.PhotoRealV2Models).find(t=>t.id===e))||void 0===n?void 0:n.name)||t||"Unknown Model"},V=e=>r.LORA_MODEL_COMPATIBILITY_MAP[e]?r.LORA_MODEL_COMPATIBILITY_MAP[e]:[],D=(e,t)=>V(e).includes(t),Y=(e,t,n,r)=>{let a={value:!0},i={value:!1,reason:o.ok},l={value:!1,reason:o.P};if(m(t))return i;if(I(t))return e.controlnetType===o.bd.StyleTransfer?a:e.controlnetType===o.bd.ContentTransfer?(null==r?void 0:r.isContentReferenceForPhoenixEnabled)?a:i:e.controlnetType===o.bd.OpenPose&&(null==r?void 0:r.isPoseToImageForPhoenixEnabled)?a:i;if(f(t))switch(e.controlnetType){case o.bd.ContentTransfer:if(!r.isContentReferenceForFluxEnabled)return l;if(null==n?void 0:n.some(e=>e.akUUID===s.w.Img2Img&&!e.isDisabled))return{value:!1,reason:"Content Reference is incompatible with Image to Image."};if(null==n?void 0:n.some(e=>e.controlnetType===o.bd.StyleTransfer&&!e.isDisabled))return{value:!1,reason:"Content Reference is incompatible with Style Reference."};break;case o.bd.FaceTransfer:return r.isCharacterReferenceForFluxEnabled?a:l;case o.bd.OpenPose:return r.isPoseToImageForFluxEnabled?a:l;case o.bd.StyleTransfer:if(!r.isStyleReferenceForFluxEnabled)return l;if(null==n?void 0:n.some(e=>e.akUUID===s.w.Img2Img&&!e.isDisabled))return{value:!1,reason:"Style Reference is incompatible with Image to Image."};if(null==n?void 0:n.some(e=>e.controlnetType===o.bd.ContentTransfer&&!e.isDisabled))return{value:!1,reason:"Style Reference is incompatible with Content Reference."};break;case o.bd.Text:return r.isTextToImageForFluxEnabled?a:l;default:return i}return a};function H(e,t,n,r){let a={value:!0},i={value:!1,reason:o.ok},l={value:!1,reason:o.eb};if(!e)return i;if((null==e?void 0:e.akUUID)===s.w.Img2Img)return _(t)?(null==n?void 0:n.some(e=>e.controlnetType&&o._N.includes(e.controlnetType)))?l:a:f(t)?(null==r?void 0:r.isImageToImageForFluxEnabled)?a:i:a;return Y(e,t,n,r)}let G=e=>{let{modelFamily:t,elementFamily:n,usingPhotoReal:a,photoRealVersion:i,isPhoenixElementsEnabled:l}=e;return!(m(t)||I(t)&&!l||N(t))&&(a&&i!==r.PhotoRealVersion.V2?D(n,o.gP.v1_5):D(n,t))},x=e=>{let{modelFamily:t,usingPhotoReal:n,photoRealVersion:a}=e;return n&&a!==r.PhotoRealVersion.V2?V(o.gP.v1_5):V(t)},k=e=>{let{usingPhotoReal:t,customRequest:n,photoRealVersion:a,modelId:i}=e;if(t&&a===r.PhotoRealVersion.V2||!t&&n)return i},F=e=>(null==e?void 0:e.transparency)&&e.transparency!==i.P2Y.Disabled},41259:(e,t,n)=>{n.d(t,{CB:()=>p,DK:()=>c,E3:()=>g,KL:()=>m,Kj:()=>a,LJ:()=>P,Qp:()=>f,T2:()=>O,T8:()=>d,Ut:()=>I,_O:()=>v,d9:()=>A,hZ:()=>L,jH:()=>T,jX:()=>o,kb:()=>s,lg:()=>E,pU:()=>N,st:()=>_,tu:()=>h,ug:()=>u,wR:()=>i,wV:()=>l});let r="/api/payments",a="".concat(r,"/apply-discount-new-plan"),i="".concat(r,"/add-free-month"),l="".concat(r,"/redirect-to-portal"),o="".concat(r,"/cancel-plan"),s="".concat(r,"/check-coupon-code"),c="".concat(r,"/buy-plan-subscription"),u="".concat(r,"/update-plan-subscription"),d="".concat(r,"/buy-api-credits"),p="".concat(r,"/check-plan-subscription-status"),T="".concat(r,"/remove-plan-subscription-cancellation"),m="".concat(r,"/remove-plan-subscription-change"),E="".concat(r,"/remove-plan-subscription-downgrade"),h="".concat(r,"/pause-plan-subscription"),g="".concat(r,"/unpause-plan-subscription"),A="".concat(r,"/team-buy-plan-subscription"),_="".concat(r,"/team-redirect-to-portal"),I="".concat(r,"/team-accept-deal"),f="".concat(r,"/update-team-plan-subscription"),N="".concat(r,"/team-cancel-plan"),v="".concat(r,"/remove-team-plan-subscription-downgrade"),O="".concat(r,"/remove-team-plan-subscription-cancellation"),P="".concat(r,"/check-team-schedule"),L="".concat(r,"/retrieve-checkout-session")},48831:(e,t,n)=>{n.d(t,{$M:()=>p,E9:()=>d,Lc:()=>c,Lz:()=>s,ib:()=>o,nD:()=>u});var r=n(31481),a=n(46671),i=n(85756),l=n(52592);let o=(e,t)=>{if("preprocessors"in e!=!1&&e.preprocessors)return e.preprocessors.find(t)},s=e=>e?r.CONTROLNETS_LIMIT_PREMIUM_USER:r.CONTROLNETS_LIMIT_FREE_USER,c=e=>!!e.availableToPlan&&e.availableToPlan!==a.plan.FREE,u=(e,t)=>{switch(e){case l.bd.FaceTransfer:case l.bd.ContentTransfer:return 1;case l.bd.StyleTransfer:return t===l.gP.FLUX||t===l.gP.FLUX_DEV?1:4;default:return 1}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"You can currently only add up to ".concat(e," of this guidance type.")},p=e=>({sourceThumbnailSrc:e.thumbnailURL?"".concat(e.thumbnailURL+i.xN):i.$D,resultThumbnailSrc:e.thumbnailResultURL?"".concat(e.thumbnailResultURL+i.xN):i.$D})},66415:(e,t,n)=>{n.d(t,{TP:()=>k,eM:()=>S,E9:()=>e_,F2:()=>eI,Zr:()=>v,gN:()=>eE,zM:()=>ee,e$:()=>eT,r4:()=>Y,OX:()=>V,aO:()=>q,_W:()=>ei,o4:()=>L,Sz:()=>f,Gy:()=>N,qc:()=>I,q1:()=>y,HY:()=>eN,xZ:()=>R,eh:()=>U,Ys:()=>b,T_:()=>C,Rq:()=>eh,qA:()=>ef,Mk:()=>x,mN:()=>K,Fd:()=>ed,$5:()=>eu,_y:()=>J,SE:()=>X,oi:()=>Z,QW:()=>es,nv:()=>eg,mv:()=>eA,ot:()=>et,eW:()=>en,jV:()=>M,P3:()=>er,wZ:()=>ec,Nc:()=>el,ch:()=>eo,b9:()=>O,_u:()=>D,g3:()=>function e(t){if(null!==t){if((null==t?void 0:t.constructor.name)==="Object")for(let n in t)t[n]=e(t[n]);return t}},YH:()=>j,r_:()=>ev,E6:()=>F,fS:()=>w,gF:()=>ea,ZO:()=>_,jr:()=>B,_Q:()=>$});var r=n(31481),a=n(46671),i=n(30832),l=n.n(i);class o{constructor(){let e,t;this.promise=new Promise((n,r)=>{e=n,t=r}),this.resolve=t=>{e(t)},this.reject=e=>{t(e)}}}var s=n(85756),c=n(22252),u=n(52592),d=n(35936),p=n(78192),T=n(75264),m=n(30284),E=n(48831),h=n(958),g=n(41259),A=n(44134).Buffer;let _=e=>{let t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},I=e=>{let t=_(l()(e).date()),n=l()(e).format("MMMM");return"".concat(t," ").concat(n)},f=e=>l()(e).format("DD/MM/YY [at] h:mm A"),N=e=>l()(e).format("DD MMM YYYY hh:mma"),v=e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+e.substring(1)},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length<=t-3?e:e.substring(0,t-3)+"...":""},P=e=>"object"!=typeof e&&null===e&&"function"!=typeof e&&!Array.isArray(e),L=e=>Object.entries(e).reduce((e,t)=>{let[n,r]=t;return P(r)?e[n]=r:e[n]=JSON.stringify(r),e},{}),R=e=>{switch(!0){case 1===e:return"one second";case e<60:return"".concat(e," seconds");case e<3600:let t=Math.floor(e/60);return 1===t?"1 minute":"".concat(t," minutes");case e<86400:let n=Math.floor(e/3600);return 1===n?"an hour":"".concat(n," hours");default:let r=Math.floor(e/86400);return 1===r?"a day":"".concat(r," days")}},C=e=>{let t=new Date(1e3*e),n=t.getDate(),r="th";switch(n%10){case 1:11!==n&&(r="st");break;case 2:12!==n&&(r="nd");break;case 3:13!==n&&(r="rd")}return new Intl.DateTimeFormat("en-AU",{weekday:"long",day:"numeric",month:"long",hour:"numeric",minute:"numeric",timeZoneName:"short"}).format(t).replace(", ".concat(n," ")," ".concat(n).concat(r," of ")).replace(/\s(am|pm)/,(e,t)=>t.toUpperCase())},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{endedText:"expired"};if(e<=0)return t.endedText||"";let n=Math.floor(e/864e5),r=Math.floor(e%864e5/36e5),a=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);if(!t.longFormat)return(0,c.yk)("day",n)||(0,c.yk)("hr",r)||(0,c.yk)("min",a)||(0,c.yk)("sec",i)||"now";let l=[];return(n&&l.push((0,c.yk)("day",n)),r&&l.push((0,c.yk)("hour",r)),a&&l.push((0,c.yk)("minute",a)),i&&(t.includeSeconds||!(n>0||r>0||a>0))&&l.push((0,c.yk)("second",i)),0===l.length)?"now":1===l.length?l[0]:"".concat(l.slice(0,-1).join(", ")," and ").concat(l.slice(-1)[0])},y=e=>{let t=Date.now();return U(e.getTime()-t)};function b(e){let t=(e instanceof Date?e.getTime():"string"==typeof e?new Date(e).getTime():e)-Date.now();if(t<0)return;let n=Math.floor(t/6e4),r=Math.floor(n/60),a=Math.floor(r/24);return a>0?"".concat(a," day").concat(a>1?"s":""):r>0?"".concat(r," hour").concat(r>1?"s":""):n>0?"".concat(n," minute").concat(n>1?"s":""):0===n?"right now":"Less than a minute"}let S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Enter";e.key===t&&e.target.blur()},M=e=>{let t="No title";if(!e)return t;let n=e.split(/,|\./gm).map(e=>e.trim()).find(e=>e.length>0);return v(null!=n?n:t)},w=e=>{let{data:t,callback:n,method:r="POST",url:a}=e,{promise:i,resolve:l,reject:s}=new o,c=new XMLHttpRequest;return c.addEventListener("progress",e=>{let t=Math.round(e.loaded/e.total*100),r=e.loaded>=e.total;null==n||n(t,r)}),c.addEventListener("load",()=>{l(c)}),c.addEventListener("error",e=>{console.error("Error while processing XHR request:",e),s(e)}),c.open(r,a),c.send(t),i};function V(e){var t,n,r;if(!e)return;let a=null===(t=(0,T.Ws)(e.generated_image_variation_generics))||void 0===t?void 0:t.url;return{id:e.id,title:M(e.generation.prompt),prompts:O(e.generation.prompt,150),nsfw:e.nsfw,imageUrl:e.url,motionGifUrl:null==e?void 0:e.motionGIFURL,motionMp4Url:null==e?void 0:e.motionMP4URL,generationId:e.generationId,isLiked:!!(null===(n=e.user_liked_generated_images)||void 0===n?void 0:n.length),likes:(null==e?void 0:e.likeCount)||0,user:null!==(r=e.user)&&void 0!==r?r:e.generation.user,createdAt:e.createdAt,trendingScore:e.trendingScore,generation:e.generation,generated_image_moderation:e.generated_image_moderation,generated_image_variation_generics:e.generated_image_variation_generics,conditionalImageUrl:a||e.url,public:e.public,showLatestUpscaledImg:!!a,collection_images:e.collection_images,imageWidth:e.image_width,imageHeight:e.image_height,teamId:e.teamId}}let D=(e,t)=>H(e,t),Y=(e,t)=>G(e,t),H=(e,t)=>{var n,r,a;return{id:e.id,name:O(e.name),description:O(e.description,150),imageUrl:null!==(a=null===(n=e.generated_image)||void 0===n?void 0:n.url)&&void 0!==a?a:null,user:e.user,createdAt:e.createdAt,isLiked:!!(null===(r=e.user_favourite_custom_models)||void 0===r?void 0:r.length),onClick:()=>t(e.id),instancePrompt:e.instancePrompt,sdVersion:e.sdVersion,coreModel:e.coreModel,modelHeight:e.modelHeight,modelWidth:e.modelWidth,trainingStrength:e.trainingStrength,type:e.type,isNsfw:null==e?void 0:e.nsfw,isPublic:null==e?void 0:e.public,imageCount:e.imageCount}},G=(e,t)=>{var n,r;return{id:e.id,name:O(e.name),description:O(e.description,150),imageUrl:(()=>{var t,n;return(null==e?void 0:null===(t=e.dataset)||void 0===t?void 0:t.dataset_images.length)>0?null==e?void 0:null===(n=e.dataset)||void 0===n?void 0:n.dataset_images[0].url:""})(),imagePrompt:"",user:e.user,createdAt:e.createdAt,onClick:()=>t(e.id.toString()),instancePrompt:e.instancePrompt,isNsfw:null==e?void 0:e.nsfw,resolution:null==e?void 0:e.resolution,baseModel:null!==(n=null==e?void 0:e.baseModel)&&void 0!==n?n:"Unknown",trainingEpoch:null==e?void 0:e.trainingEpoch,learningRate:null==e?void 0:e.learningRate,textEncoder:null===(r=null==e?void 0:e.trainTextEncoder)||void 0===r||r,type:null==e?void 0:e.focus}},x=e=>{switch(e){case u.gP.v1_5:return"v1.5";case u.gP.v2:return"v2.1";default:return""}};function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n>=0?Math.min(n,e.length):Math.max(e.length+n+1,0);return[...e.slice(0,r),t,...e.slice(r)]}function F(e,t){let n=[...e],r=n.findIndex("function"==typeof t?t:e=>e===t);return r>-1&&n.splice(r,1),n}function B(e,t,n){let r=[...e].slice(0,n-1);return r.unshift(t),r}let K=e=>{switch(e){case a.sd_generation_schedulers.KLMS:return"KLMS";case a.sd_generation_schedulers.EULER_ANCESTRAL_DISCRETE:return"Euler Ancestral ";case a.sd_generation_schedulers.EULER_DISCRETE:return"Euler Discrete";case a.sd_generation_schedulers.DDIM:return"DDIM";case a.sd_generation_schedulers.DPM_SOLVER:return"DPM Solver";case a.sd_generation_schedulers.DPM_SDE_SOLVER:return"DPM SDE Solver";case a.sd_generation_schedulers.PNDM:return"PNDM";case a.sd_generation_schedulers.UNIPC:return"UniPC";case a.sd_generation_schedulers.LEONARDO:return"Leonardo";case a.sd_generation_schedulers.DPM_SDE_KARRAS:return"DPM 2M SDE Karras ++";default:throw Error("Error in helpers/getFormattedScheduler: Unknown scheduler: ".concat(e))}},J=e=>{let{width:t,height:n,promptMagicVersion:i,usingTransparency:l,usingAlchemy:o,usingAlchemyV2:c,usingHighRes:u,usingMotion:d,usingPhotoRealV1:p,usingPhotoRealV2:T,usingPromptMagic:m,usingSvd:E}=e,g=t*n;if(l===h.P2Y.ForegroundOnly&&(o||c||p||T))return g>1048576?1:g>589824?2:4;if(d||E)return r.MOTION_MAX_OUTPUTS_PER_GENERATION;if(c||T)return g>1055360?1:g>589824?4:8;if(u){if(t>s.xO[3]||n>s.xO[3])return 1;if(t>s.xO[2]||n>s.xO[2])return 2}let A=m&&i===a.PROMPT_MAGIC_VERSIONS.v3||p,_=0;for(;_<s.xO.length;_++){let e=Math.max(t,n);if(e<=(s.xO[_+1]||1/0)&&e>s.xO[_])break}return A?s.YX[_]:s.i2[_]},X=()=>{let e=new Date,t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds();return new Date(e.getTime()+(864e5-(36e5*t+6e4*n+1e3*r))).getTime()},Z=()=>{let e=new Date;return e.setUTCMonth(e.getUTCMonth()+1),e.setUTCDate(1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e.getTime()},j=e=>e===p.B1.value?void 0:e,q=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{n(r.error)},r.readAsDataURL(e)}),z=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{n(r.error)},r.readAsText(e)}),W=e=>{let{inputString:t,regexPattern:n,regexModifier:r}=e,a=new RegExp(n,r);return((t||"").match(a)||[]).length},Q=async e=>{let t={};for(let n of[["vertex","\nv ","g"],["uv","\nvt ","g"],["normal","\nvn ","g"],["face","\nf ","g"],["group","\ng ","g"],["usemtl","\nusemtl ","g"]])t[n[0]]=W({inputString:e,regexPattern:n[1],regexModifier:n[2]});return t},$=async e=>{let t=await z(e),n=await Q(t),r=t.match(/f .*/gm);if(!(r||[]).length)return{isValid:!1,message:"no faces specified",counts:n};for(let e of(r||[]).map(e=>e.replace(/f /,"")).flatMap(e=>e.split(" ")).map(e=>e.split("/").map(e=>parseInt(e)))){if(e.length>3)return{isValid:!1,message:"more than 3 integers detected for a face vertex",counts:n};if(!e.length)return{isValid:!1,message:"face vertex missing",counts:n};if(e[0]>n.vertex)return{isValid:!1,message:"out of bounds vertex specified ".concat(e[0]),counts:n};if(void 0!==e[1]&&e[1]>n.uv)return{isValid:!1,message:"out of bounds uv specified ".concat(e[1]),counts:n};if(void 0!==e[2]&&e[2]>n.normal)return{isValid:!1,message:"out of bounds normal specified ".concat(e[2]),counts:n}}return{isValid:!0,counts:n}},ee=e=>new Blob([e.split(",")[0].includes("base64")?A.from(e.split(",")[1],"base64"):decodeURIComponent(e.split(",")[1])],{type:e.split(",")[0].split(":")[1].split(";")[0]}),et=e=>{let{data:t,selectedTextureGenId:n}=e;if(!t)return null;let{model_asset_texture_generations:r,...a}=t,i=r.find(e=>e.id===n);return i?{...i,...a}:null},en=e=>{let t={};for(let n of(null==e?void 0:e.model_asset_texture_images)||[]){let e=n.type;t[e]?console.error("duplicate texture type detected in generation",n):t[e]=n.url}return t},er=e=>/^\d+$/.test(e),ea=e=>{let{text:t,wordLimit:n}=e;if(!Number.isInteger(n)||n<1)throw Error("invalid wordLimit argument");if("string"!=typeof t)throw Error("invalid text argument");let r=t.trim().replace(/[ ]{2,}/g," ").split(" "),a=r.slice(0,n).join(" ");return r.length>n?"".concat(a," ..."):a},ei=e=>e.replace(/\r?\n|\r/g,""),el=e=>e===a.SUBSCRIPTION_SOURCE.APPLE,eo=e=>e===a.SUBSCRIPTION_SOURCE.GOOGLE,es=e=>({...s.jU,onClick:e}),ec=e=>e===a.plan.FREE,eu=e=>"loras:".concat(JSON.stringify({akUUID:e})),ed=e=>"generated_images:".concat(e),ep=e=>"controlnet_preprocessor_matrix:".concat(e),eT=(e,t,n)=>n.filter(e=>e.isEnabled).filter(e=>0!==e.weight).filter(n=>{let r=eu(n.id),a=e.readFragment({id:r,fragment:h.Aj9});return null!=a&&!!a.baseModel&&(0,d.QQ)(t,a.baseModel)}),em=async e=>{var t;let{apolloClient:n,sdVersion:r,usingLeonardoMagic:a,usingAlchemy:i,leonardoMagicVersion:l,usingPhotoReal:o,match:s}=e,c=await n.query({query:h.kvz}),u=e=>(0,m.Ul)({preprocessor:e,controlNetMatch:s,currentSdVersion:r,usingAlchemy:i,usingLeonardoMagic:a,leonardoMagicVersion:l,usingPhotoReal:o}),d=c.data.controlnet_definition.find(e=>e.controlnetType===s.controlnetType&&!!e.preprocessors.find(u));if(!d)return null;let p=d.preprocessors.find(u);return null!==(t=null==p?void 0:p.id)&&void 0!==t?t:null},eE=async e=>{let{apolloClient:t,controlnets:n,imageInputs:r,imageInputLimit:a,usingLeonardoMagic:i,usingAlchemy:l,currentSdVersion:o,leonardoMagicVersion:s,usingPhotoReal:c,photoRealVersion:u,usingTransparency:d,isGenerationImageGuidancePremiumAllowed:p}=e,T=(await Promise.all(n.filter(e=>e.isEnabled).map(async e=>{let n=await em({apolloClient:t,sdVersion:o,match:e.match,usingAlchemy:l,leonardoMagicVersion:s,usingLeonardoMagic:i,usingPhotoReal:c});if(n)return{...e,preprocessorId:n}}))).filter(Boolean),g=T.filter(e=>e.isEnabled).filter(e=>{let n=t.readFragment({id:ep(e.preprocessorId),fragment:h.Aax});return null==n||!n.preprocessorBaseModel});return g.length>0&&await t.query({query:h.kvz,variables:{where:{id:{_in:g.map(e=>e.preprocessorId)}}}}),T.filter(e=>e.isEnabled).filter((e,n)=>{let T=ep(e.preprocessorId),g=t.readFragment({id:T,fragment:h.Aax}),A=null==g?void 0:g.preprocessorBaseModel;if(!A||!g)return!1;let _=!0===(0,m.is)({imageInput:e,imageInputIdx:n,imageInputs:r,imageInputLimit:a,usingLeonardoMagic:i,usingAlchemy:l,inputBaseModel:A,currentSdVersion:o,leonardoMagicVersion:s,usingPhotoReal:c,photoRealVersion:u,usingTransparency:d}),I=(0,E.Lc)({availableToPlan:g.availableToPlan});return _&&(p||!I)})},eh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_SAFE_INTEGER;return Math.floor(Math.random()*e)},eg=()=>{var e,t,n;return(null===(n=window)||void 0===n?void 0:null===(t=n.Rewardful)||void 0===t?void 0:null===(e=t.coupon)||void 0===e?void 0:e.id)||void 0},eA=()=>{var e,t;return(null===(t=window)||void 0===t?void 0:null===(e=t.Rewardful)||void 0===e?void 0:e.referral)||void 0},e_=e=>e?{team:{akUUID:{_eq:e}}}:{teamId:{_is_null:!0}},eI=e=>e?{teamId:{_eq:e}}:{teamId:{_is_null:!0}},ef=e=>{var t;let n=null===(t=e.teams)||void 0===t?void 0:t.find(t=>t.akUUID===e.selectedTeam);return(null==n?void 0:n.plan)||e.plan},eN=e=>new Intl.NumberFormat("en-US").format(e),ev=()=>{window.location.href=g.wV}},71579:(e,t,n)=>{n.d(t,{CY:()=>_,FA:()=>M,FL:()=>N,Fn:()=>g,IY:()=>v,Ie:()=>i,KD:()=>b,L0:()=>a,Lt:()=>f,ME:()=>h,NK:()=>E,NQ:()=>P,On:()=>A,Or:()=>c,aN:()=>O,ae:()=>U,bR:()=>o,f5:()=>L,go:()=>C,hW:()=>S,ig:()=>y,jB:()=>p,jz:()=>u,kR:()=>T,mR:()=>s,pu:()=>w,r2:()=>I,uo:()=>l,xj:()=>d,yM:()=>m});var r=n(31481);let a=8,i=3500,l=5e3,o=.5,s=24,c=3,u=3,d=1e3,p=0x80000000-1,T="lightning-stream-persisted-settings",m="ba5fe6d3-8815-432c-9e64-1cab5bc5aa99",E="Prompt enhanced successfully",h="flow-state",g=2,A=80,_="1f2fdbba-4259-4dec-acee-6cad506d7b30",I="LIGHTNING_STREAM",f="square",N=24,v=1,O=24,P=20.875,L=2500;r.LIGHTNING_STREAM_GENERATION_COST;let R={inputPixelCount:1048576,upscaleMultiplier:1,legacyUpscaleMultiplier:1,isPremium:!1},C={Low:R,Medium:R,High:R},U={config:{batchSize:a,jpegQuality:70,noiseDeltaVariation:.04,noiseDeltaMinSimilarity:.4,noiseDeltaMaxSimilarity:.85},describeImageError:null,generationInputs:[[]],generationInputsPool:[[]],providedAesthetics:{color:[],light:[],shot:[],style:[]},batchImagesRequested:0,completedImageOrder:[new Set],promptGenerating:!1,promptGenerationFailures:0,selectedEntryPerDepth:[],settings:{aesthetics:{color:null,light:null,shot:null,style:null},height:1024,prompt:"",promptEnhance:!0,width:1024},settingsPerDepth:[],streams:[[]],streamDepth:0,streamId:"",endOfStreamViewed:!1,user:{isRolloverTokensAllowed:!1,tokens:{paidTokens:0,rolloverTokens:0,subscriptionTokens:0}},userInputs:{color:null,height:1024,light:null,prompt:"",private:!1,promptEnhance:!0,scrollToGenerate:!0,shot:null,style:null,width:1024},moreLikeThisModerationInProgress:!1},y={removeBackground:!1},b=[{key:"style",label:"Vibe",shortLabel:"Vibe"},{key:"light",label:"Lighting",shortLabel:"Light"},{key:"shot",label:"Shot Type",shortLabel:"Shot"},{key:"color",label:"Color Theme",shortLabel:"Color"}],S={automatic:"Automatic",none:"None"},M=[{prompt:"Puppies playing with a ball in a park",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-a.webp"},{prompt:"Futuristic city skyline with flying cars and tall skyscrapers",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-b.webp"},{prompt:"Ancient ruins with vines and overgrown plants in the background",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-c.webp"},{prompt:"An astronaut floating in space, with planets and stars behind them",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-d.webp"},{prompt:"A vibrant reef filled with corals and colorful fish",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-e.webp"},{prompt:"A serene forest with giant mushrooms and tiny magical creatures",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-f.webp"},{prompt:"A pirate ship sailing through stormy seas",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-g.webp"},{prompt:"A mouse paragliding over a modern city",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-h.webp"},{prompt:"A hot air balloon floating over a scenic countryside with rolling hills",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-i.webp"},{prompt:"A flower field with a windmill in the distance",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-j.webp"},{prompt:"A fantasy castle sitting on top of a floating island",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-k.webp"},{prompt:"A cozy library full of books, with an open window showing the night sky",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-l.webp"},{prompt:"A cozy cabin in the woods with smoke rising from the chimney",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-m.webp"},{prompt:"A crystal-clear lake surrounded by towering pine trees",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-n.webp"},{prompt:"A hiker standing with arms raised on a mountain peak over amazing scenery",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-o.webp"},{prompt:"A photo of a rectangular black perfume labelled bottle set on a rugged rock",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-p.webp"},{prompt:"A rugged SUV over a vast expanse of dry terrain with sparse vegetation, mountains, and clouds",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-q.webp"},{prompt:"A sculptural modern building with lush greenery",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-r.webp"},{prompt:"A small boat floating among fluffy clouds",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-s.webp"},{prompt:"Cozy modern fireplace scene with snow outside",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-t.webp"},{prompt:"Fun commercial shot of a fresh orange juice bottle, label, styled with splashes and oranges",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-u.webp"},{prompt:"Model showcasing an elegant hand painted print fashion dress",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-v.webp"},{prompt:"Vibrant modern scene of a woman in a flowing dress that mirrors swirling multicolored striped walls under an arched hallway",thumbnailUrl:"https://cdn.leonardo.ai/static/images/lightning-stream/inspiration-w.webp"}],w={nsfw:"Input prompt contains NSFW content",contentModeration:"content moderation filter",imageViolatesContentPolicy:"violates content policy."}},75264:(e,t,n)=>{n.d(t,{Am:()=>I,EQ:()=>O,H5:()=>k,HB:()=>_,HJ:()=>ea,J1:()=>ei,KE:()=>x,KO:()=>en,KV:()=>E,N2:()=>F,PI:()=>ep,Ph:()=>Q,Qh:()=>ec,R7:()=>ee,TA:()=>em,Tn:()=>f,Ws:()=>B,XT:()=>eu,YN:()=>T,YY:()=>eT,Z_:()=>el,_6:()=>b,_A:()=>H,_i:()=>R,a9:()=>w,c0:()=>W,c2:()=>y,cs:()=>G,fU:()=>h,fu:()=>U,mw:()=>er,nI:()=>v,ob:()=>L,oe:()=>ed,or:()=>D,oy:()=>eo,p1:()=>$,r2:()=>et,rY:()=>V,t5:()=>S,td:()=>es,tk:()=>m,vg:()=>A,yG:()=>N,yZ:()=>M,yh:()=>P,zK:()=>Y});var r=n(31481),a=n(46671),i=n(85756),l=n(66415),o=n(78192),s=n(14192),c=n(23432),u=n(85064),d=n(958);let p="ORIGINAL",T=e=>{let{transformType:t}=e;switch(t){case"UNZOOM":return["UPSCALE","NOBG"];case"UPSCALE":return["NOBG"];case"NOBG":return[];default:return["UPSCALE","UNZOOM","NOBG"]}},m=e=>{let{availableVariations:t,variation:n}=e;return t.includes(n)},E=e=>{let{originalImg:t,hasDefaultUpscaledOptions:n,defaultUpscaledOptions:r,hasAlternateUpscaledOptions:a,alternateUpscaledOptions:l,hasHdUpscaledOptions:o,hdUpscaledOptions:s,hasUnzoomedOptions:c,unzoomedOptions:u,hasNoBgOptions:d,noBgOptions:p,hasSmoothUpscaledOptions:T,smoothUpscaledOptions:m,alchemyRefinerOptions:E,hasAlchemyRefinerOptions:h,hasUniversalUpscalerOptions:g,universalUpscalerOptions:A,hasUltraUpscalerOptions:_,ultraUpscalerOptions:I}=e,f=[];return t&&(f.push({value:i.AK.ORIGINAL,label:"Original Image"}),h&&f.push(...E),g&&f.push(...A),_&&f.push(...I),T&&f.push(...m),o&&f.push(...s),a&&f.push(...l),n&&f.push(...r),c&&f.push(...u),d&&f.push(...p)),f},h=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(i.AK.NO_BG,"-").concat(t),label:"No Background ".concat(0===t?"":1+t++),variationId:e.id})),g=e=>{switch(e){case r.ALCHEMY_REFINER_STRENGTH.Low:return"Low";case r.ALCHEMY_REFINER_STRENGTH.Medium:return"Medium";case r.ALCHEMY_REFINER_STRENGTH.High:return"High"}},A=e=>{let[t]=e.upscale_details,{alchemyRefinerStrength:n,alchemyRefinerCreative:r}=t;if(!n&&!r)return"Alchemy Upscaler Image";let a=g(n);return"Alchemy Upscaler - ".concat(null!=a?a:(null!=n?n:0).toString()," ").concat(r?"Smooth":"Normal")},_=(e,t)=>{let[n]=e.upscale_details,[r]=t.upscale_details;return r.alchemyRefinerCreative===n.alchemyRefinerCreative?r.alchemyRefinerStrength-n.alchemyRefinerStrength:n.alchemyRefinerCreative?1:-1},I=e=>null==e?void 0:e.sort(_).map((e,t)=>({value:"".concat(i.AK.ALCHEMY_REFINER,"-").concat(t),label:A(e),variationId:e.id})),f=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(i.AK.UNIVERSAL_UPSCALE,"-").concat(t),label:"Universal Upscaler ".concat(0===t?"":1+t++),variationId:e.id})),N=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(i.AK.ULTRA_UPSCALE,"-").concat(t),label:"Ultra Upscaler ".concat(0===t?"":1+t++),variationId:e.id})),v=e=>null==e?void 0:e.reduce((e,t,n)=>t.status!==c.P.COMPLETE?e:[...e,{value:"".concat(i.AK.DEFAULT_UPSCALED,"-").concat(n),label:"Creative Upscaled Image ".concat(0===n?"":1+n++),variationId:t.id}],[]),O=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(i.AK.ALTERNATE_UPSCALED,"-").concat(t),label:"Alternate Upscaled Image ".concat(0===t?"":1+t++),variationId:e.id})),P=(e,t)=>null==e?void 0:e.map((e,n)=>({value:"".concat(i.AK.HD_UPSCALED,"-").concat(n),label:"".concat(t?s.gB:s.AR,"d Image ").concat(0===n?"":1+n++),variationId:e.id})),L=(e,t)=>null==e?void 0:e.map((e,n)=>({value:"".concat(i.AK.SMOOTH_UPSCALED,"-").concat(n),label:"".concat(t?s.LT:s.TX,"d Image ").concat(0===n?"":1+n++),variationId:e.id})),R=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(i.AK.UNZOOMED,"-").concat(t),label:"Unzoomed Image ".concat(0===t?"":1+t++),variationId:e.id})),C=e=>{var t,n,r,a,i,l,s;let{generated_image_variation_generics:c,imageVariationType:u}=e;switch(u){case o.Jr.ALCHEMY_REFINER:return!!(null===(t=K(c))||void 0===t?void 0:t.length);case o.Jr.UPSCALE_DEFAULT:return!!(null===(n=J(c))||void 0===n?void 0:n.length);case o.Jr.UPSCALE_ALTERNATE:return!!(null===(r=X(c))||void 0===r?void 0:r.length);case o.Jr.UPSCALE_HD:return!!(null===(a=Z(c))||void 0===a?void 0:a.length);case o.Jr.UPSCALE_SMOOTH:return!!(null===(i=j(c))||void 0===i?void 0:i.length);case o.Jr.UNZOOM:return!!(null===(l=q(c))||void 0===l?void 0:l.length);case o.Jr.NO_BG:return!!(null===(s=z(c))||void 0===s?void 0:s.length);default:throw Error("getHasHitVariationLimit: Unhandled image variation type")}},U=e=>{let t=C({generated_image_variation_generics:e,imageVariationType:o.Jr.UPSCALE_DEFAULT}),n=C({generated_image_variation_generics:e,imageVariationType:o.Jr.UPSCALE_ALTERNATE}),r=C({generated_image_variation_generics:e,imageVariationType:o.Jr.UPSCALE_SMOOTH}),a=C({generated_image_variation_generics:e,imageVariationType:o.Jr.UPSCALE_HD});return{hasHitLimitUpscaleDefault:t,hasHitLimitUpscaleAlternate:n,hasHitLimitUpscaleSmooth:r,hasHitLimitUpscaleHd:a,hasHitLimitUnzoom:C({generated_image_variation_generics:e,imageVariationType:o.Jr.UNZOOM}),hasHitLimitNoBg:C({generated_image_variation_generics:e,imageVariationType:o.Jr.NO_BG})}},y=e=>null==e?void 0:e.find(e=>e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE),b=e=>null==e?void 0:e.find(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.SMOOTH))}),S=e=>null==e?void 0:e.find(e=>e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.NOBG),M=e=>(null==e?void 0:e.filter(e=>e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE))||[],w=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER))}))||[],V=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE))}))||[],D=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.ULTRA))}))||[],Y=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.DEFAULT))}))||[],H=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.ALTERNATE))}))||[],G=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.HD))}))||[],x=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.SMOOTH))}))||[],k=e=>(null==e?void 0:e.filter(e=>e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.UNZOOM))||[],F=e=>(null==e?void 0:e.filter(e=>e.status===c.P.COMPLETE&&e.transformType===a.VARIATION_TYPE.NOBG))||[],B=e=>{let t=D(e);if(t.length)return t[0];let n=w(e).sort(_);if(n.length)return n[0];let r=V(e);return r.length?r[0]:y(e)},K=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER))}))||[],J=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.DEFAULT))}))||[],X=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.ALTERNATE))}))||[],Z=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.HD))}))||[],j=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===a.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===a.VARIATION_ONECLICK_TYPE.SMOOTH))}))||[],q=e=>(null==e?void 0:e.filter(e=>e.transformType===a.VARIATION_TYPE.UNZOOM))||[],z=e=>(null==e?void 0:e.filter(e=>e.transformType===a.VARIATION_TYPE.NOBG))||[],W=(e,t)=>{var n,r,a,i,l,o,s;if(!t)return;let c=null==e?void 0:null===(r=e.upscale_details)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.upscaleMultiplier,u=null==e?void 0:null===(i=e.upscale_details)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:a.width,d=null==e?void 0:null===(o=e.upscale_details)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:l.height;if(!t)return;let p=null===(s=t.find(e=>"Resolution"===e.spec))||void 0===s?void 0:s.value,T=u,m=d;if(!u&&!d){if("string"!=typeof p||!c)return;let[e,t]=p.replace("px","").split(" x ");T=Number(e)*c,m=Number(t)*c}return"".concat(T," x ").concat(m,"px")},Q=e=>{let{transformType:t,oneClickType:n}=e;switch(t){case a.VARIATION_TYPE.NOBG:return o.Jr.NO_BG;case a.VARIATION_TYPE.UNZOOM:return o.Jr.UNZOOM;case a.VARIATION_TYPE.INPAINT:return o.Jr.INPAINT;case a.VARIATION_TYPE.OUTPAINT:return o.Jr.OUTPAINT;case a.VARIATION_TYPE.UPSCALE:switch(n){case a.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:return o.Jr.ALCHEMY_REFINER;case a.VARIATION_ONECLICK_TYPE.ALTERNATE:return o.Jr.UPSCALE_ALTERNATE;case a.VARIATION_ONECLICK_TYPE.HD:return o.Jr.UPSCALE_HD;case a.VARIATION_ONECLICK_TYPE.SMOOTH:return o.Jr.UPSCALE_SMOOTH;case a.VARIATION_ONECLICK_TYPE.DEFAULT:}default:return o.Jr.UPSCALE_DEFAULT}},$=e=>(()=>{switch(e){case o.Jr.UNZOOM:return{variation:a.VARIATION_TYPE.UNZOOM};case o.Jr.NO_BG:return{variation:a.VARIATION_TYPE.NOBG};case o.Jr.UPSCALE_DEFAULT:return{variation:a.VARIATION_TYPE.UPSCALE};case o.Jr.UPSCALE_ALTERNATE:return{variation:a.VARIATION_TYPE.UPSCALE,isAlternate:!0};case o.Jr.UPSCALE_HD:return{variation:a.VARIATION_TYPE.UPSCALE,isHd:!0};case o.Jr.UPSCALE_SMOOTH:return{variation:a.VARIATION_TYPE.UPSCALE,isSmooth:!0};default:throw Error("Unhandled variation type: ".concat(e))}})(),ee=e=>{let t,n;let r={},i={id:e.imageId,isVariation:e.isVariation,...e.teamId&&{teamId:e.teamId}};switch(e.variation){case a.VARIATION_TYPE.UNZOOM:n=d.P7V,t="sdUnzoomJob";break;case a.VARIATION_TYPE.NOBG:n=d.Dxs,t="sdNobgJob";break;case a.VARIATION_TYPE.UPSCALE:t="sdUpscaleJob",n=d.yI8,r=e.isAlternate?{alternativeUpscale:!0,hdUpscale:!1,smoothUpscale:!1}:e.isHd?{alternativeUpscale:!1,hdUpscale:!0,smoothUpscale:!1}:e.isSmooth?{alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!0}:{alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!1};break;default:throw Error("Unsupported variation type ".concat(e.variation))}return{arg1:{...i,...r},mutation:n,mutationResponseKey:t}},et=e=>{switch(e){case o.Jr.UPSCALE_DEFAULT:return a.VARIATION_ONECLICK_TYPE.DEFAULT;case o.Jr.UPSCALE_ALTERNATE:return a.VARIATION_ONECLICK_TYPE.ALTERNATE;case o.Jr.UPSCALE_HD:return a.VARIATION_ONECLICK_TYPE.HD;case o.Jr.UPSCALE_SMOOTH:return a.VARIATION_ONECLICK_TYPE.SMOOTH;default:return null}},en=e=>{switch(e){case o.Jr.UPSCALE_DEFAULT:case o.Jr.UPSCALE_ALTERNATE:case o.Jr.UPSCALE_HD:case o.Jr.UPSCALE_SMOOTH:return a.VARIATION_TYPE.UPSCALE;case o.Jr.INPAINT:return a.VARIATION_TYPE.INPAINT;case o.Jr.OUTPAINT:return a.VARIATION_TYPE.OUTPAINT;case o.Jr.NO_BG:return a.VARIATION_TYPE.NOBG;case o.Jr.UNZOOM:return a.VARIATION_TYPE.UNZOOM;default:throw Error("Unhandled image variation type: ".concat(e))}},er=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{where:{userId:{_eq:e},...(0,l.E9)(t),canvasRequest:{_eq:!1},...u.MV,...u.T5,...u.n$},userId:e,teamAkUUID:t,limit:i.X8,offset:n}},ea=e=>e?s.LT:s.TX,ei=e=>e?s.gB:s.AR,el=e=>e?"Alchemy Smooth Upscale - For images with smooth textures, which includes illustrative, anime, and cartoon-like images - ":"".concat(s.TX,"r - ").concat(s.ED," - "),eo=e=>e?"Alchemy Crisp Upscale - For images with lots of texture detail, including photos, digital art, and some 3D renders - ":"".concat(s.AR,"r - ").concat(s.vh," - "),es=(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let[r,a]=e;n[r]=a.filter(e=>{var n;return!(null===(n=t[r])||void 0===n?void 0:n.includes(e))})}),n};var ec=function(e){return e[e.NO_BG=0]="NO_BG",e[e.ALCHEMY_REFINER=1]="ALCHEMY_REFINER",e[e.UNIVERSAL_UPSCALER=2]="UNIVERSAL_UPSCALER",e[e.INSTANT_REFINE=3]="INSTANT_REFINE",e[e.DEFAULT_UPSCALE=4]="DEFAULT_UPSCALE",e[e.ALTERNATE_UPSCALE=5]="ALTERNATE_UPSCALE",e[e.HD_UPSCALE=6]="HD_UPSCALE",e[e.SMOOTH_UPSCALE=7]="SMOOTH_UPSCALE",e[e.UNZOOM=8]="UNZOOM",e}({});let eu={0:"No Background",1:e=>A(e),2:"Universal Upscaler",3:"Instant Refine Image",4:"Creative Upscaled Image",5:"Alternate Upscaled Image",6:(e,t)=>"".concat(t?s.gB:s.AR,"d Image"),7:(e,t)=>"".concat(t?s.LT:s.TX,"d Image"),8:"Unzoomed Image"},ed=e=>{switch(e.transformType){case a.VARIATION_TYPE.UNZOOM:return 8;case a.VARIATION_TYPE.NOBG:return 0;case a.VARIATION_TYPE.UPSCALE:switch(e.upscale_details[0].oneClicktype){case a.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:return 1;case a.VARIATION_ONECLICK_TYPE.ALTERNATE:return 5;case a.VARIATION_ONECLICK_TYPE.DEFAULT:return 4;case a.VARIATION_ONECLICK_TYPE.HD:return 6;case a.VARIATION_ONECLICK_TYPE.INSTANT_REFINE:return 3;case a.VARIATION_ONECLICK_TYPE.SMOOTH:return 7;case a.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE:return 2}}return 4},ep=e=>{switch(e){case a.VARIATION_TYPE.OUTPAINT:return"Outpaint";case a.VARIATION_TYPE.INPAINT:return"Inpaint";case a.VARIATION_TYPE.UPSCALE:return"Upscale";case a.VARIATION_TYPE.UNZOOM:return"Unzoom";case a.VARIATION_TYPE.NOBG:case o.Jr.NO_BG:return"No Background";case a.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:case a.VARIATION_ONECLICK_TYPE.HD:case a.VARIATION_ONECLICK_TYPE.SMOOTH:case o.Jr.UPSCALE_HD:case o.Jr.UPSCALE_SMOOTH:return"Alchemy Upscaler";case a.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE:return"Universal Upscaler";case a.VARIATION_ONECLICK_TYPE.INSTANT_REFINE:return"Instant Refine";case a.VARIATION_ONECLICK_TYPE.ULTRA:return"Ultra Upscale";default:return"Variation"}},eT=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[i.nE.COMPLETE],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null==e?void 0:null===(t=e.filter(e=>n.includes(e.status)))||void 0===t?void 0:t.reduce((e,t)=>{var n,i,l,o;let s=null==t?void 0:null===(n=t.upscale_details)||void 0===n?void 0:n[0],c=(null==s?void 0:s.oneClicktype)||(null==t?void 0:t.transformType);if(!c)return e;let u=(null==s?void 0:s.alchemyRefinerCreative)||(null==s?void 0:s.oneClicktype)===a.VARIATION_ONECLICK_TYPE.SMOOTH?"Smooth":(null==s?void 0:s.oneClicktype)===a.VARIATION_ONECLICK_TYPE.HD?"Crisp":void 0,d={id:t.id,label:ep(c),name:"".concat((null===(i=e[c])||void 0===i?void 0:i.length)>0?"#".concat(e[c].length+1," "):"").concat(ep(c)),width:(null==s?void 0:s.width)||(null==r?void 0:null===(l=r[p])||void 0===l?void 0:l[0].width),height:(null==s?void 0:s.height)||(null==r?void 0:null===(o=r[p])||void 0===o?void 0:o[0].height),...u&&{alchemyRefinerMode:u},...(null==s?void 0:s.creativityStrength)&&{creativityStrength:null==s?void 0:s.creativityStrength},...(null==s?void 0:s.optional_metadata)&&{upscalerStyle:null==s?void 0:s.optional_metadata},...(null==s?void 0:s.upscaleMultiplier)&&{upscaleMultiplier:null==s?void 0:s.upscaleMultiplier},...(null==s?void 0:s.alchemyRefinerStrength)&&{alchemyRefinerStrength:g(null==s?void 0:s.alchemyRefinerStrength)}};return{...e,[c]:[...e[c]||[],d]}},r)},em=e=>{var t,n;if(!e)return{};let r=e.imageWidth&&e.imageHeight,a=r?e.imageWidth:null===(t=e.generation)||void 0===t?void 0:t.imageWidth,l=r?e.imageHeight:null===(n=e.generation)||void 0===n?void 0:n.imageHeight,o={[p]:[{id:e.id,label:"Original",name:"Original",width:a,height:l}]};return eT(e.generated_image_variation_generics,[i.nE.COMPLETE],o)||o}},78192:(e,t,n)=>{n.d(t,{Ab:()=>r,B1:()=>a,Jr:()=>i,N3:()=>l});var r=function(e){return e.Upload="upload",e.Generated="generated",e}({}),a=function(e){return e.value="ALL",e.label="All",e}({}),i=function(e){return e.INPAINT="INPAINT",e.NO_BG="NO_BG",e.OUTPAINT="OUTPAINT",e.UNZOOM="UNZOOM",e.UPSCALE_ALTERNATE="UPSCALE_ALTERNATE",e.UPSCALE_DEFAULT="UPSCALE_DEFAULT",e.UPSCALE_HD="UPSCALE_HD",e.UPSCALE_SMOOTH="UPSCALE_SMOOTH",e.ALCHEMY_REFINER="ALCHEMY_REFINER",e.UPSCALE_ULTRA="UPSCALE_ULTRA",e}({}),l=function(e){return e.OUTPAINT="OUTPAINT",e.INPAINT="INPAINT",e.UPSCALE="UPSCALE",e.UNZOOM="UNZOOM",e.NOBG="NOBG",e}({})},85064:(e,t,n)=>{n.d(t,{MV:()=>a,T5:()=>i,n$:()=>l});var r=n(71579);let a={isStoryboard:{_eq:!1}},i={source:{_neq:r.r2}},l={universalUpscaler:{_is_null:!0}}},98959:(e,t,n)=>{n.d(t,{$y:()=>s,DI:()=>i,Z3:()=>l,dy:()=>c,jo:()=>a,nW:()=>o,wU:()=>u});var r=n(46671);r.TEAM_PLAN_TYPE.CUSTOM,r.plan.PRO,r.plan.STANDARD,r.plan.BASIC,r.plan.FREEPLUS,r.plan.FREE;let a=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer}],i=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer}],l=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer,options:[{label:"Low",value:.66,description:"Low strength will have the greatest flexibility at the cost of resemblance"},{label:"Mid",value:1.32,description:"Medium strength will display reasonable flexibility and more resemblance"},{label:"High",value:2,description:"High strength may be less flexible but have the best resemblance"}]},{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer,options:[{label:"Low",value:.4},{label:"Mid",value:.8},{label:"High",value:1.2},{label:"Ultra",value:1.6},{label:"Max",value:2}]},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer,options:[{label:"Low",value:.66},{label:"Mid",value:1.32},{label:"High",value:2}]}],o=[r.CONTROLNET_TYPE.FaceTransfer,r.CONTROLNET_TYPE.ContentTransfer],s=[{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer},{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer}],c=[{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer}],u=.5}}]);